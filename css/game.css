/* =========================================
   1. MENU & ALGEMENE PANELEN
   ========================================= */

.screen-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 30px;
    text-align: center;
}

.logo-area h1 {
    font-size: 3.5em;
    line-height: 1;
    margin: 0 0 10px 0;
    text-shadow: 0 4px 10px rgba(0,0,0,0.5);
}

.highlight {
    background: -webkit-linear-gradient(45deg, var(--accent-primary), var(--accent-secondary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.subtitle {
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 3px;
    font-size: 0.8em;
    margin-bottom: 20px;
}

.menu-buttons {
    width: 100%;
    margin-top: 40px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.version-text {
    position: absolute;
    bottom: 20px;
    color: rgba(255,255,255,0.2);
    font-size: 0.7em;
}

/* =========================================
   2. GAME VIEW (Layout)
   ========================================= */

.game-panel {
    display: flex;
    flex-direction: column;
    height: 100%;
    position: relative;
}

/* --- Scorebalk (Bovenin) --- */
.top-bar {
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(15, 23, 42, 0.6);
    backdrop-filter: blur(5px);
    border-bottom: 1px solid rgba(255,255,255,0.05);
    z-index: 100;
}

.score-pill {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: rgba(255,255,255,0.03);
    padding: 5px 15px;
    border-radius: 12px;
    min-width: 75px;
    border: 1px solid rgba(255,255,255,0.05);
}

.score-pill.us { border-bottom: 3px solid var(--accent-primary); }
.score-pill.them { border-bottom: 3px solid var(--accent-secondary); }

.score-pill .label {
    font-size: 0.6em;
    color: var(--text-muted);
    font-weight: 800;
    letter-spacing: 1px;
}

.score-pill .value {
    font-size: 1.4em;
    font-weight: 700;
    color: #fff;
}

.trump-display {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.trump-icon {
    font-size: 1.8em;
    height: 35px;
    line-height: 35px;
    filter: drop-shadow(0 0 5px rgba(255,255,255,0.3));
}

.icon-btn-small {
    background: none;
    border: none;
    color: #94a3b8;
    font-size: 1.5em;
    cursor: pointer;
    transition: color 0.2s;
}
.icon-btn-small:hover { color: #fff; }

/* =========================================
   3. TAFEL & SPELERS (AANGEPAST)
   ========================================= */

.table-container {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow: hidden;
    perspective: 1000px;
}

/* De Tafel zelf */
.klaverjas-table {
    width: 90%;
    aspect-ratio: 1/1;
    max-height: 50vh;
    border-radius: 50%;
    background: radial-gradient(circle at center, #334155 0%, #0f172a 85%);
    border: 6px solid #1e293b;
    box-shadow: 
        inset 0 0 60px rgba(0,0,0,0.8),
        0 20px 50px rgba(0,0,0,0.5),
        0 0 0 1px rgba(255,255,255,0.1);
    position: relative;
}

/* --- Speler Stijl (FIX voor leesbaarheid) --- */
.player {
    position: absolute;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 20; 
    transition: transform 0.3s;
}

.avatar {
    width: 54px;
    height: 54px;
    /* Iets lichtere achtergrond voor beter contrast met de zwarte tafel */
    background: linear-gradient(135deg, #475569, #1e293b);
    border: 2px solid #64748b;
    
    /* FIX: Tekst is nu fel wit met een harde schaduw */
    color: #ffffff; 
    font-weight: 900; /* Dikker gedrukt */
    font-size: 1.1em;
    text-shadow: 0 2px 4px #000000; /* Zwarte rand om de letter */
    
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.6);
    position: relative;
}

.p-name {
    font-size: 0.8em;
    color: #ffffff;
    font-weight: 700;
    margin-top: 6px; /* Iets dichter op de avatar */
    text-shadow: 0 1px 3px #000000;
    background-color: rgba(0,0,0,0.6); /* Iets donkerder voor leesbaarheid */
    padding: 2px 10px;
    border-radius: 12px;
    white-space: nowrap;
    z-index: 25; /* Zorg dat de naam bovenop ligt */
}

/* --- Actieve Speler Highlight --- */
.active-turn .avatar {
    border-color: var(--accent-primary);
    background: var(--accent-primary);
    /* Bij actieve speler (blauw) ook witte tekst houden */
    color: #ffffff; 
    box-shadow: 0 0 20px rgba(56, 189, 248, 0.6);
    animation: pulse-ring 2s infinite;
}

.active-turn .p-name {
    color: var(--accent-primary);
    background-color: rgba(15, 23, 42, 0.95);
    border: 1px solid rgba(56, 189, 248, 0.3);
}

@keyframes pulse-ring {
    0% { box-shadow: 0 0 0 0 rgba(56, 189, 248, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(56, 189, 248, 0); }
    100% { box-shadow: 0 0 0 0 rgba(56, 189, 248, 0); }
}

/* --- Speler Posities (FIX voor "Jij" label) --- */
/* We zetten de spelers iets meer 'op' de tafel, ipv aan de rand */

.p-top { 
    top: 15px; /* Was -30px */
    left: 50%; 
    transform: translateX(-50%); 
}

.p-bottom { 
    bottom: 30px; /* Was -30px. Nu hoog genoeg zodat 'Jij' boven de kaarten uitkomt */
    left: 50%; 
    transform: translateX(-50%); 
}

.p-left { 
    left: 15px; /* Was -30px */
    top: 50%; 
    transform: translateY(-50%); 
}

.p-right { 
    right: 15px; /* Was -30px */
    top: 50%; 
    transform: translateY(-50%); 
}

/* Debug Slots */
.slot { position: absolute; width: 10px; height: 10px; pointer-events: none; }
.slot-top    { top: 35%; left: 50%; }
.slot-bottom { bottom: 35%; left: 50%; }
.slot-left   { top: 50%; left: 35%; }
.slot-right  { top: 50%; right: 35%; }

/* =========================================
   4. KAARTEN (MODERN DESIGN)
   ========================================= */

.card-modern {
    width: 65px;
    height: 96px;
    /* Papier textuur effect */
    background: linear-gradient(160deg, #ffffff 0%, #f1f5f9 100%);
    border-radius: 8px;
    box-shadow: 
        0 2px 5px rgba(0,0,0,0.2),
        0 5px 15px rgba(0,0,0,0.1);
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 5px;
    font-family: 'Poppins', sans-serif;
    border: 1px solid rgba(0,0,0,0.05);
}

.card-value {
    font-weight: 800;
    font-size: 1.1em;
    line-height: 0.9;
}

.card-suit-big {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2.5em;
    opacity: 1;
}

.card-corner-btm {
    align-self: flex-end;
    transform: rotate(180deg);
}

/* Kleuren van de kaarten */
.suit-red { color: #dc2626; }   /* Iets donkerder rood voor beter contrast */
.suit-black { color: #1e293b; }

/* =========================================
   5. SPELER HAND (Onderin)
   ========================================= */

.bottom-section {
    height: 160px;
    position: relative;
    display: flex;
    justify-content: center;
    z-index: 50;
}

.player-hand-wrapper {
    width: 100%;
    display: flex;
    justify-content: center;
    perspective: 600px;
}

.player-hand {
    display: flex;
    align-items: flex-end;
    justify-content: center;
    height: 100%;
    padding-bottom: 25px;
}

.hand-card {
    margin-right: -30px; /* Kaarten overlappen meer */
    transition: transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    cursor: pointer;
    transform-origin: bottom center;
}

.hand-card:last-child { margin-right: 0; }

/* Hover effect in hand */
.hand-card:hover {
    transform: translateY(-25px) scale(1.1) rotate(0deg) !important;
    z-index: 100;
    margin: 0 10px; /* Maak ruimte om kaart te pakken */
}

/* =========================================
   6. OVERLAYS & POPUPS
   ========================================= */

/* Meldingen (Toast) */
.toast {
    position: absolute;
    top: 25%; /* Was 50%, nu staat hij boven de kaarten */
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 100; /* Lager dan de kaarten */
    pointer-events: none;
    background: rgba(15, 23, 42, 0.95);
    border: 1px solid rgba(255,255,255,0.1);
    color: white;
    padding: 12px 25px;
    border-radius: 30px;
    z-index: 200;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    font-weight: 600;
    text-align: center;
    pointer-events: none;
    animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn { from { opacity: 0; transform: translate(-50%, -40%); } to { opacity: 1; transform: translate(-50%, -50%); } }

/* Actie Menu (Troef kiezen) */
.action-overlay {
    position: absolute;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(30, 41, 59, 0.95);
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.6);
    z-index: 300;
    display: flex;
    flex-direction: column;
    gap: 15px;
    width: 300px;
    text-align: center;
    border: 1px solid rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
}

.action-title {
    font-size: 0.9em;
    color: #94a3b8;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.trump-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
}

.suit-btn {
    background: #475569;
    border: none;
    border-radius: 12px;
    font-size: 1.8em;
    padding: 10px;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 4px 6px rgba(0,0,0,0.2);
}

.suit-btn.h, .suit-btn.d { color: #ef4444; }
.suit-btn.s, .suit-btn.c { color: white; }

.suit-btn:hover {
    background: #64748b;
    transform: translateY(-3px);
}
.suit-btn:active { transform: translateY(0); }

.btn-text {
    background: none;
    border: none;
    color: #94a3b8;
    text-decoration: underline;
    cursor: pointer;
    font-size: 0.9em;
    padding: 5px;
}
.btn-text:hover { color: #fff; }

/* =========================================
   7. ANIMATIES OP TAFEL
   ========================================= */

.table-anim-card {
position: absolute;
    width: 65px;
    height: 96px;
    z-index: 150; /* Verhoogd naar 150 zodat ze ALTIJD bovenop liggen */
    transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-shadow: 0 10px 20px rgba(0,0,0,0.3);
}

/* Startposities (buiten beeld) */
.fly-in-bottom { transform: translate(-50%, 400px) rotate(0deg); }
.fly-in-top    { transform: translate(-50%, -400px) rotate(180deg); }
.fly-in-left   { transform: translate(-400px, -50%) rotate(90deg); }
.fly-in-right  { transform: translate(400px, -50%) rotate(-90deg); }

/* Eindposities (op tafel - ietsje willekeurig gedraaid voor realisme) */
.on-table-bottom { top: 60%; left: 50%; transform: translate(-50%, -50%) rotate(-5deg); }
.on-table-top    { top: 40%; left: 50%; transform: translate(-50%, -50%) rotate(5deg); }
.on-table-left   { top: 50%; left: 40%; transform: translate(-50%, -50%) rotate(-10deg); }
.on-table-right  { top: 50%; right: 40%; transform: translate(-50%, -50%) rotate(10deg); }

/* Shake bij fout */
.shake-anim { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
@keyframes shake {
  10%, 90% { transform: translate3d(-1px, 0, 0); }
  20%, 80% { transform: translate3d(2px, 0, 0); }
  30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
  40%, 60% { transform: translate3d(4px, 0, 0); }
}

/* --- NIEUW: VORIGE SLAG POPUP --- */
.overlay-full {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(15, 23, 42, 0.9);
    backdrop-filter: blur(8px);
    z-index: 900;
    display: flex;
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.2s;
    cursor: pointer;
}
.last-trick-container {
    text-align: center;
    color: white;
}