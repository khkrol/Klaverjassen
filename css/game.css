/* game.css - Bruine Kroeg Editie - VERSION 1.6 (VISUAL FIX) */

/* =========================================
   1. MENU & ALGEMENE LAYOUT (DEFINITIEF)
   ========================================= */

.screen-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center; /* Alles netjes in het midden */
    align-items: center;
    padding: 10px;
    text-align: center;
    height: 100%;
    width: 100%;
    overflow-y: auto; /* Scrollen als het scherm écht te klein is */
}

/* --- LOGO --- */
.logo-area {
    margin-bottom: 15px; /* Iets ruimte tussen logo en knoppen */
    flex-shrink: 0;
}

.logo-area h1 {
    font-family: var(--font-heading);
    font-size: 3em; 
    line-height: 1;
    margin: 0;
    color: var(--accent-gold);
    text-shadow: 2px 2px 0px #3e2723; 
}

.subtitle {
    color: var(--text-muted);
    font-family: var(--font-heading);
    letter-spacing: 2px;
    font-size: 0.9em;
    margin-top: 5px;
    border-top: 1px solid var(--text-muted);
    border-bottom: 1px solid var(--text-muted);
    padding: 2px 0;
    display: inline-block;
}

/* --- KNOPPEN CONTAINER --- */
.menu-buttons {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px; /* Vaste, gelijke ruimte tussen álle knoppen */
    padding-bottom: 20px;
}

/* --- HET BASISFORMAAT VOOR ALLE KNOPPEN --- */
/* Dit geldt nu voor Start, Leaderbord, Gastenboek én de rest */
#main-menu .btn-primary {
    width: 90%;           /* Ze vullen mooi de breedte */
    max-width: 340px;     /* Maar worden niet te breed op PC */
    padding: 12px 0;      /* Vaste hoogte voor iedereen */
    font-size: 1em;       /* Vaste tekstgrootte voor iedereen */
    margin: 0;            /* Geen marges, de 'gap' hierboven regelt de ruimte */
    
    /* Basis Hout Stijl (voor de onderste 3 knoppen) */
    background: linear-gradient(to bottom, #8d6e63, #5d4037);
    border: 2px solid #3e2723;
    color: #fff;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    box-shadow: 0 4px 6px rgba(0,0,0,0.4);
}

#main-menu .btn-primary:active {
    transform: translateY(2px);
    box-shadow: 0 1px 2px rgba(0,0,0,0.4);
}

/* --- ALLEEN KLEURAFWIJKINGEN --- */
/* Hier passen we GEEN padding of font-size meer aan! */

/* GOUD: Start Spel */
#btn-start-game {
    background: linear-gradient(to bottom, #ffd700, #cba300) !important;
    border-color: #9e7e00 !important;
    color: #4a3500 !important;
    text-shadow: 1px 1px 0 rgba(255,255,255,0.3) !important;
}

/* ZILVER: Leaderbord */
#btn-topscores {
    background: linear-gradient(to bottom, #e0e0e0, #a0a0a0) !important;
    border-color: #666 !important;
    color: #333 !important;
    text-shadow: 1px 1px 0 rgba(255,255,255,0.4) !important;
}

/* BRONS: Gastenboek */
#btn-guestbook {
    background: linear-gradient(to bottom, #cd8c4e, #965a23) !important;
    border-color: #5d3a1a !important;
    color: #fff !important;
    text-shadow: 1px 1px 0 rgba(0,0,0,0.6) !important;
}

/* =========================================
   2. GAME VIEW (SCOREBALK)
   ========================================= */

.game-panel {
    display: flex;
    flex-direction: column;
    height: 100%;
    position: relative;
}

.top-bar {
    padding: 10px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: var(--bg-chalk);
    /* Subtiel patroon in header */
    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjMWUzYTI5Ii8+CjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiMzNDU2NDIiLz4KPC9zdmc+');
    border-bottom: 6px solid #5d4037;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    z-index: 100;
}

.score-pill {
    display: flex;
    flex-direction: column;
    align-items: center;
    border: 2px solid rgba(255,255,255,0.1);
    padding: 5px 10px;
    border-radius: 4px;
    min-width: 70px;
}

.score-pill.us { border-bottom: 2px solid var(--accent-gold); }
.score-pill.them { border-bottom: 2px solid var(--accent-red); }

.score-pill .label {
    font-family: 'Patrick Hand', cursive, sans-serif;
    font-size: 0.8em;
    color: rgba(255,255,255,0.7);
}

.score-pill .value {
    font-family: var(--font-card);
    font-weight: 700;
    font-size: 1.8em;
    color: #fff;
    letter-spacing: 1px;
}

/* TROEF INDICATOR (Gouden Munt) */
.trump-display {
    position: relative;
    width: 60px;
    height: 60px;
    background: radial-gradient(circle at 30% 30%, #ffecb3, #ffc107, #ff8f00);
    border: 3px solid #fff; 
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 4px 6px rgba(0,0,0,0.4), inset 0 -2px 5px rgba(0,0,0,0.2);
    z-index: 10;
    margin: 0 15px; 
}

.trump-display .label { display: none; }

.trump-icon {
    font-size: 2em;
    line-height: 1;
    filter: drop-shadow(0 1px 1px rgba(255,255,255,0.4));
}
.trump-icon.suit-red { color: #d32f2f; }
.trump-icon.suit-black { color: #212121; }

.icon-btn-small {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 1.5em;
    cursor: pointer;
}

/* STATUS BALK */
.status-bar {
    width: 100%;
    background-color: rgba(40, 24, 21, 0.95);
    color: var(--accent-gold);
    font-family: var(--font-heading);
    text-align: center;
    padding: 8px 0;
    font-size: 1.1em;
    border-bottom: 2px solid #5d4037;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    z-index: 90;
    min-height: 40px;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* =========================================
   3. TAFEL & SPELERS
   ========================================= */

.table-container {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    z-index: 10;
    /* Tafel iets omhoog duwen zodat hand eronder past */
    padding-bottom: 80px; 
    /* Algemene achtergrond glow */
    background: radial-gradient(circle at center, rgba(93, 64, 55, 0.3) 0%, rgba(42, 27, 14, 0.6) 60%, rgba(30, 20, 10, 0.9) 100%);
}

.klaverjas-table {
    /* Formaat */
    width: 95%;          
    max-width: 58vh;     
    aspect-ratio: 1/1;
    border-radius: 50%;
    margin-top: -30px;   
    
    /* Geen overlay lagen, schaduw zit IN de verf */
    background: radial-gradient(circle, #8d6e63 20%, #4e342e 50%, #1a100c 95%);
    background-size: 100% 100%;
    
    border: 10px solid #281815;
    
    /* Alleen schaduw naar buiten (onder de tafel) */
    box-shadow: 
        0 60px 100px rgba(0,0,0,0.8), 
        0 0 0 1px rgba(255,255,255,0.05);
        
    position: relative;
    transform-style: flat; 
    z-index: 10;
}

/* ZEKERHEID: Geen pseudo-elementen die schaduw werpen */
.klaverjas-table::after, 
.klaverjas-table::before {
    display: none !important;
    content: none !important;
}

/* Spelers */
.player {
    position: absolute;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 20; 
}

.avatar {
    width: 56px;
    height: 56px;
    background: var(--accent-cream);
    border: 4px solid var(--bg-wood);
    color: var(--text-dark);
    font-family: var(--font-heading);
    font-weight: bold;
    font-size: 1.2em;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 4px 8px rgba(0,0,0,0.4);
}

.p-name { display: none; }

.active-turn .avatar {
    border-color: var(--accent-gold);
    box-shadow: 0 0 20px rgba(255, 193, 7, 0.6);
    background: #fff;
}

.p-top { top: 10px; left: 50%; transform: translateX(-50%); }
.p-bottom { bottom: 15px; left: 50%; transform: translateX(-50%); } 
.p-left { left: 10px; top: 50%; transform: translateY(-50%); }
.p-right { right: 10px; top: 50%; transform: translateY(-50%); }

/* =========================================
   4. KAARTEN (DEFINTIEVE FIX)
   ========================================= */

/* De basis kaartstijl (voor in de hand én op tafel) */
.card-modern {
    width: 65px;
    height: 96px;
    
    /* HARDE RESET VAN ACHTERGROND - Zorgt dat hij 100% wit is */
    background: #ffffff !important; 
    background-color: #ffffff !important;
    background-image: none !important; 
    
    /* Geen doorzichtigheid! */
    opacity: 1 !important;
    
    border-radius: 6px;
    border: 1px solid #999; 
    
    /* Standaard schaduw (in de hand) */
    box-shadow: 1px 2px 4px rgba(0,0,0,0.3);
    
    overflow: hidden;
    position: relative;
    display: block; 
    z-index: 1; /* Zorg dat inhoud (cijfers) erboven ligt */
}

/* Inhoud van de kaart */
.card-value {
    font-weight: 700;
    font-size: 1.4em;
    line-height: 0.9;
    z-index: 5;
    text-align: center;
    letter-spacing: -1px;
    position: absolute;
    top: 3px;
    left: 4px;
}
.card-value span { font-size: 0.7em; display: block; margin-top: -2px; }

.card-corner-btm {
    top: auto; left: auto; bottom: 3px; right: 4px;
    transform: rotate(180deg);
}

.suit-red { color: #d32f2f; }
.suit-black { color: #1a1a1a; }

.card-suit-big {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    font-size: 3.2em;
    opacity: 0.2;
    pointer-events: none;
    z-index: 2;
}

/* --- KAARTEN OP TAFEL (ANIMATIE) --- */
/* Dit is de container die beweegt. Deze mag GEEN visuele eigenschappen hebben! */

.table-anim-card {
    position: absolute;
    width: 65px; height: 96px;
    z-index: 9999 !important; 
    
    /* CRUCIAAL: Container is onzichtbaar, alleen de beweging */
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    
    transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
    
    /* Alleen 2D transformaties om mobiele bugs te voorkomen */
    transform: translate(-50%, -50%) scale(1.0) !important;
}

/* De kaart BINNENIN de bewegende container */
.table-anim-card .card-modern {
    width: 100% !important;
    height: 100% !important;
    
    /* De kaart zelf is wit en heeft de schaduw */
    background: #ffffff !important;
    box-shadow: 0 4px 10px rgba(0,0,0,0.4) !important;
    border: 1px solid #bbb !important;
    
    /* Extra helderheid om grauwe waas tegen te gaan */
    filter: brightness(1.05);
}

/* Animatie posities */
.fly-in-bottom { transform: translate(-50%, 300px) scale(1.3) rotate(-10deg) !important; }
.fly-in-top    { transform: translate(-50%, -300px) !important; }
.fly-in-left   { transform: translate(-300px, -50%) !important; }
.fly-in-right  { transform: translate(300px, -50%) !important; }

/* Rustposities */
.on-table-bottom { top: 65%; left: 50%; transform: translate(-50%, -50%) !important; }
.on-table-top    { top: 35%; left: 50%; transform: translate(-50%, -50%) !important; }
.on-table-left   { top: 50%; left: 35%; transform: translate(-50%, -50%) !important; }
.on-table-right  { top: 50%; left: 65%; transform: translate(-50%, -50%) !important; }

/* =========================================
   5. SPELER HAND
   ========================================= */

.bottom-section {
    position: absolute;
    bottom: 0; left: 0;
    width: 100%; height: 240px;
    display: flex;
    justify-content: center;
    align-items: flex-end; 
    z-index: 40; 
    background: linear-gradient(to top, #120b08 0%, rgba(26, 16, 12, 0) 100%);
    pointer-events: none; 
}

.player-hand-wrapper {
    width: 100%;
    display: flex;
    justify-content: center;
}

.player-hand {
    display: flex;
    align-items: flex-end;
    justify-content: center;
    height: 100%;
    padding-bottom: 20px;
    pointer-events: auto; 
}

.hand-card {
    margin-right: -22px; 
    transition: transform 0.2s;
    cursor: pointer;
    transform-origin: bottom center;
    /* De wrapper in de hand is ook transparant */
    background: transparent;
}

.hand-card:last-child { margin-right: 0; }
.hand-card:hover { transform: translateY(-30px) scale(1.1) !important; z-index: 100; }

/* Disabled / Grijze kaarten in hand */
.card-disabled {
    cursor: not-allowed !important;
    pointer-events: none;
    z-index: 0 !important; 
}

.card-disabled .card-modern {
    transform: scale(0.9) translateY(10px); 
    filter: brightness(0.6) grayscale(0.5); 
    background-color: #ddd !important;
    border-color: #555;
    box-shadow: none;
}

/* =========================================
   6. TROEF KIEZER & KNOPPEN
   ========================================= */

#trump-selection.action-overlay {
    position: absolute;
    top: 60px;
    left: 0; width: 100%; height: 55px;
    background-color: rgba(40, 24, 21, 0.98); 
    border-bottom: 2px solid #5d4037;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    z-index: 3000 !important; 
    pointer-events: auto !important;
    animation: slideInTop 0.3s ease-out;
}

#trump-selection h2, #trump-selection .action-title { display: none; }

@keyframes slideInTop {
    from { transform: translateY(-100%); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.trump-grid { display: flex; gap: 15px; }

.suit-btn {
    width: 40px; height: 40px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #fff, #e0e0e0);
    border: 2px solid #bcaaa4;
    font-size: 1.5em;
    display: flex; justify-content: center; align-items: center;
    cursor: pointer;
    color: #212121 !important; 
}
.suit-btn.h, .suit-btn.d, .suit-btn:nth-child(1), .suit-btn:nth-child(2) { color: #d32f2f !important; }

#btn-pass {
    height: 36px;
    background: rgba(255,255,255,0.1);
    border: 1px solid #8d6e63;
    color: #ccc;
    font-weight: bold;
    border-radius: 18px;
    padding: 0 20px;
    cursor: pointer;
    font-size: 0.9em;
}

/* =========================================
   7. OVERLAYS (POPUPS)
   ========================================= */

.overlay-backdrop, #last-trick-overlay, #score-sheet-overlay, #game-over-overlay, #round-end-overlay { 
    position: fixed; top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(4px);
    z-index: 2500;
    display: flex; justify-content: center; align-items: center;
}

#last-trick-overlay { z-index: 2600; }
#game-over-overlay { z-index: 3000; }

/* Last Trick Container */
.last-trick-container {
    background: radial-gradient(circle, #5d4037, #3e2723);
    border: 4px solid #8d6e63;
    border-radius: 12px;
    padding: 20px;
    display: flex; flex-direction: column; align-items: center;
    min-width: 300px;
}
.last-trick-cards { display: flex; gap: 10px; pointer-events: none; margin-bottom: 10px; }
.last-trick-item { display: flex; flex-direction: column; align-items: center; gap: 8px; }
.last-trick-label { font-family: var(--font-heading); color: var(--accent-gold); font-size: 0.9em; }

/* Game Over / Round End */
.game-over-container, .round-end-container {
    background: radial-gradient(circle, #5d4037, #3e2723);
    border: 4px solid var(--accent-gold);
    border-radius: 20px;
    padding: 30px;
    text-align: center;
    width: 90%; max-width: 400px;
    box-shadow: 0 0 60px rgba(0,0,0,0.9);
}

.go-scores { display: flex; justify-content: center; gap: 30px; margin: 20px 0; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px; }
.value-big { font-family: var(--font-card); font-size: 2.5em; font-weight: bold; color: #fff; }

/* Leaderboard & Rules */
.leaderboard-container, .rules-container {
    background: rgba(0,0,0,0.3);
    border: 2px solid var(--bg-wood-light);
    border-radius: 10px;
    width: 100%; max-height: 60vh;
    overflow-y: auto; padding: 10px;
    text-align: left;
}
.hs-item { display: flex; align-items: center; background: rgba(255,255,255,0.05); margin-bottom: 8px; padding: 10px; border-radius: 6px; }
.hs-name { font-family: var(--font-heading); color: var(--accent-cream); margin-left: 10px; flex: 1; }
.hs-score { font-family: var(--font-card); color: var(--accent-gold); font-weight: bold; }

/* Turflijst */
.score-sheet-container {
    background-color: var(--bg-chalk);
    border: 8px solid #5d4037;
    border-radius: 12px;
    padding: 20px;
    width: 95%; max-width: 400px; max-height: 85vh;
    display: flex; flex-direction: column;
}
.score-table-wrapper { flex: 1; overflow-y: auto; margin-bottom: 10px; }
.chalk-table { width: 100%; border-collapse: collapse; font-family: 'Patrick Hand', cursive, sans-serif; color: #eee; font-size: 1.1em; }
.chalk-table td, .chalk-table th { padding: 8px; border-bottom: 1px dashed rgba(255,255,255,0.2); }
.total-row td { border-top: 3px double #fff; font-weight: bold; color: var(--accent-gold); }

/* Gedraaide Kaart (Drents) */
.bid-card-overlay {
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1500;
    display: flex; flex-direction: column; align-items: center;
    pointer-events: none;
    animation: bidPopIn 0.5s forwards;
}
@keyframes bidPopIn { from { opacity: 0; transform: translate(-50%, -50%) scale(0.5); } to { opacity: 1; transform: translate(-50%, -50%) scale(1.2); } }
.bid-card-label { font-family: var(--font-heading); color: var(--accent-gold); background: rgba(0,0,0,0.8); padding: 4px 12px; border-radius: 4px; margin-bottom: 10px; }

/* Canvas */
#confetti-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2000; }

/* Knoppen */
.btn-primary, .btn-secondary {
    width: 100%;
    border-radius: 8px;
    font-family: var(--font-heading);
    border: 2px solid #3e2723;
    border-bottom: 4px solid #281815;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.4);
    text-transform: uppercase; letter-spacing: 1px; color: #fff;
    padding: 12px;
}
.btn-primary { background: linear-gradient(to bottom, #8d6e63, #5d4037); font-size: 1.2em; }
.btn-secondary { background: linear-gradient(to bottom, #a1887f, #6d4c41); font-size: 1em; margin-top: 10px; }
.btn-active { background: var(--accent-gold) !important; color: #3e2723 !important; border-color: #fff !important; }

.settings-label-row { display: flex; justify-content: center; gap: 10px; margin-bottom: 10px; }
.info-badge { background: var(--accent-gold); color: #000; border-radius: 50%; width: 25px; height: 25px; font-weight: bold; border: none; }

/* =========================================
   8. MOBIELE OPTIMALISATIES (SPECIFIEK)
   ========================================= */

@media (max-width: 600px) {
    .top-bar { padding: 2px 8px; height: 50px; }
    .score-pill { min-width: 40px; padding: 2px 4px; }
    .score-pill .value { font-size: 1.1em; }
    .trump-display { width: 38px; height: 38px; margin: 0 4px; border-width: 2px; }
    .trump-icon { font-size: 1.2em; }
    .table-container { padding-top: 20px; }
    .klaverjas-table { width: 92%; max-width: 95vw; }
    .avatar { width: 42px; height: 42px; font-size: 0.9em; border-width: 2px; }
    .p-left { left: 5px; } .p-right { right: 5px; }
    
    /* HAND KAARTEN */
    .hand-card { margin-right: -28px; }
    .card-modern { width: 60px; height: 88px; }
    .player-hand { padding-bottom: 10px; }
}

/* --- GASTENBOEK STYLING --- */

.guestbook-container {
    background: rgba(0,0,0,0.3);
    border: 2px solid var(--bg-wood-light);
    border-radius: 10px;
    width: 100%;
    flex: 1; /* Neemt resterende ruimte in */
    overflow-y: auto; /* Scrollen mogelijk */
    padding: 10px;
    margin-bottom: 10px;
    box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
}

.gb-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.gb-item {
    background: var(--accent-cream); /* Bierviltje kleur */
    color: var(--text-dark);
    padding: 10px;
    border-radius: 2px;
    box-shadow: 2px 2px 5px rgba(0,0,0,0.4);
    font-family: 'Patrick Hand', cursive, sans-serif; /* Handschrift font indien beschikbaar */
    transform: rotate(-1deg); /* Speels scheef */
    position: relative;
}

/* Om en om een beetje draaien voor het rommelige effect */
.gb-item:nth-child(even) { transform: rotate(1deg); background: #f0e6ce; }

.gb-header {
    display: flex;
    justify-content: space-between;
    font-size: 0.8em;
    color: #666;
    border-bottom: 1px dashed #999;
    padding-bottom: 4px;
    margin-bottom: 4px;
    font-weight: bold;
}

.gb-msg {
    font-size: 1.1em;
    line-height: 1.2;
}

/* Invoergedeelte */
.guestbook-input-area {
    width: 100%;
    background: rgba(0,0,0,0.6);
    padding: 10px;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

#gb-input-name, #gb-input-msg {
    width: 100%;
    padding: 8px;
    border-radius: 4px;
    border: 1px solid var(--bg-wood);
    font-family: sans-serif;
    background: #fff;
    color: #000;
}

#gb-input-msg {
    resize: none;
    height: 60px;
}